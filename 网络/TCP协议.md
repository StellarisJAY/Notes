# TCP协议

## 特点

1. 面向连接，TCP传输依赖于进程之间建立的TCP连接，有连接建立、释放和管理的开销。
2. 可靠传输，TCP通过差错重传、停止等待协议、连续ARQ等保证可靠传输
3. 流量控制，TCP通过发送接收窗口来控制流量
4. 拥塞控制，TCP能够控制网络的拥塞程度
5. 面向字节流，从进程流入的数据会被TCP分成字节序列，接收方不一定能够按序收到这些字节序列

## 首部格式

固定部分 20字节

1. 源端口和目的端口：各占2字节
2. 序号：seq，共4字节。TCP中每传输一个字节流都有一个单独的序号。序号之间的间隔是字节长度。比如第一个字节流开始是1，长度是100。那么第二个的序号就是101。
3. 确认号：4字节，期望收到对方下一个报文段的第一个字节序号。也就是接收端收到字节序列的下一个字节序列开始。
4. 数据偏移：共4位，首部长度，即报文中数据部分距离报文开始的距离。
5. 6个控制位，URG,ACK,PSH,RST,SYN,FIN
6. 窗口值，接收方告诉发送方的允许的窗口大小，用来控制发送窗口大小，以此控制流量。
7. 检验和，与UDP的检验和相似，也需要伪首部。