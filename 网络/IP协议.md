# IP协议

## IPV4与IPV6

- IPV4：地址长度4字节，常用点分十进制表示，比如：255.255.255.255
- IPV6：地址长度16字节，由8块16进制数组成

## 地址分类

- A类：首位0~127，二进制首位0
- B类：128~191.二进制首位为10
- C类：192~223.二进制首位为110
- D类：224~239.二进制首位为1110
- E类：240~255.二进制首位为1111

## IP协议格式

![img](https://images2015.cnblogs.com/blog/916092/201707/916092-20170707142324331-1201756642.png)

首部共20字节固定部分，首部长度最长为60字节。

- 版本：4或6
- 首部长度：首部长度字段 * 4字节 = 首部实际长度
- 总长度：IP数据报长度 = 首部 + 数据部分
- 标识、标志、片偏移：标识为分片ID，标志位是否分片，片偏移表示该报文在分片中的位置
- 源地址和目的地址：源IP和目的IP，都是4字节
- 协议：数据部分的协议，比如TCP是6，UDP是17
- 首部校验和：对首部进行二进制反码计算得出的16位二进制串，接收方收到后对首部进行同样的计算，判断结果是否和校验和相同，不同代表传输过程中有差错。